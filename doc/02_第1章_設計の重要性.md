# 第1章 設計の重要性

「AIがコードを書ける時代に、なぜ私たちは設計を学ぶ必要があるのでしょうか？」

これは、現代のソフトウェアエンジニアが抱く、素直で、そしてもっともな疑問かもしれません。AIに任せた方が、速く、効率的に開発が進むのではないか。実際、小規模なツールや単機能のアプリケーションであれば、AIの生成するコードだけで十分に目的を達成できるケースも増えています。

しかし、プロジェクトが成長し、関わる人が増え、機能が複雑化するにつれて、AIだけでは乗り越えられない「壁」が見えてきます。その壁こそが、本書のテーマである「設計」の重要性を示しているのです。

## AIが書くコードの特徴

まず、AIの能力を正しく理解することから始めましょう。現在の生成AIは、驚くほど優秀なコーダーです。

- パターン認識による高速なコード生成: Web上に存在する膨大なコードを学習し、一般的なパターンに基づいたコードを瞬時に生成します。
- 文法的に正しいコードの出力: 構文エラーのない、多くの場合においてそのまま動作するコードを書き上げます。
- 一般的なベストプラクティスの適用: 標準的な命名規則やコーディングスタイルに沿った、読みやすいコードを生成する傾向があります。

一方で、AIには限界もあります。特に、プロジェクト固有の「文脈」を理解することは、依然として困難な課題です。

例えば、「ユーザー認証機能を実装して」とAIに指示したとしましょう。AIは、一般的なログイン、ログアウト、セッション管理のコードを生成してくれるはずです。しかし、そのコードは、あなたのプロジェクトが持つ、次のような固有の事情を考慮してはくれません。

- 「将来的に、SNS認証だけでなく、二要素認証も導入する計画がある」
- 「ユーザー情報は、個人情報保護の観点から、他のデータとは分離して管理する必要がある」
- 「このプロジェクトでは、認証に関するログは、特定のフォーマットで記録しなければならない」

AIは、与えられたコンテキストウィンドウ内の情報を頼りに「部分最適」なコードを高速で生成しますが、プロジェクト固有のビジネスコンテキストや長期の保守性までを視野に入れた「全体最適」を自律的に考慮することはできません。その結果、AIが生成したコードを単純に組み合わせただけでは、以下のような問題が発生しがちです。

- コンテキストの喪失: プロジェクト固有の要求や、将来の拡張計画が考慮されず、「今、動けばいい」コードの寄せ集めになってしまう。
- 一貫性の欠如: 各機能がそれぞれ自己完結しているため、全体として見たときに命名規則や設計思想がバラバラになる。
- 密結合な構造: 機能同士が複雑に依存しあい、一つの変更が予期せぬ副作用を生む「スパゲッティコード」の状態に陥る。

こうした問題は、実際のプロジェクトでも繰り返し発生しています。

- マイクロサービス間の密結合: AIが提案した便利な共通関数を安易に共有化した結果、各サービスが他サービスのデータベースを直接参照するようになり、独立性が失われた。
- 認証トークンのハードコーディング: スニペットのまま本番環境に持ち込んでしまい、トークンの漏洩リスクとローテーション不能な設計負債を抱えた。
- 無制限リトライによるカスケード障害: エラー処理の雛形をそのまま採用したところ、リトライ制御がなく、障害発生時に全体で再試行が連鎖してサービスを止めてしまった。

## 設計がもたらす価値

ここで「良い設計」の価値が明らかになります。良い設計とは、単に美しいコードを書くことではありません。それは、変化に対応し続けるための、未来への投資です。

良い設計が施されたソフトウェアには、以下のような特徴があります。

- 変更に強い: 新機能の追加や仕様変更があっても、修正箇所が限定的で、影響範囲を予測しやすい。
- 理解しやすい: 新しくプロジェクトに参加したメンバーでも、コードの構造や役割分担を迅速に把握できる。
- テストしやすい: 各機能が独立しているため、個別にテストを行うことができ、品質を担保しやすい。

これらの特徴は、チーム開発の効率を飛躍的に向上させます。役割分担が明確になり、複数のエンジニアが並行して開発を進めても、互いの作業が衝突しにくくなるのです。

そして、この「理解しやすさ」は、AIとの協調においても極めて重要な役割を果たします。明確な設計意図に基づいて構造化されたコードは、人間だけでなく、AIにとっても理解しやすいのです。良い設計は、AIに対して「どこに、どのようなコードを追加してほしいか」を的確に指示するための、共通言語となるのです。

AIが生成したコードをレビューするときは、次のチェックリストを手元に置いてみてください。

□ 生成されたコードは既存の設計原則やアーキテクチャ上の契約に従っているか？
□ ビジネスロジックとインフラロジックが適切に分離されているか？
□ エラーハンドリングとフェイルセーフは十分か？
□ セキュリティ要求（認証・認可・監査ログなど）は満たされているか？

## 人間とAIの「理解」の相互作用

「人間に理解しやすいコードは、AIにも理解しやすい」

これは、AI時代のソフトウェア開発における、一つの真理と言えるでしょう。なぜなら、良い設計の原則（例えば、クラスや関数の責任が単一で明確であること、命名規則が一貫していること、依存関係がシンプルであること）は、コードの構造を予測可能で、論理的なものにするからです。

AIは、このような論理的で一貫性のある構造を「文脈」として学習し、より精度の高いコードを生成することができます。逆に、場当たり的に作られた複雑なコードに対しては、AIもその構造を理解できず、的外れな提案をしてしまう可能性が高まります。

つまり、人間が良い設計を行うことでAIのパフォーマンスが向上し、そのAIの助けを借りて人間がさらに効率よく開発を進める、という好循環が生まれるのです。

## 設計力を身につける意義

AIがコーディングの多くを担う時代において、エンジニアの価値は「コードを書く速さ」から「優れた設計を構築する能力」へと移行します。設計力とは、単なる技術スキルではありません。それは、

- 問題の本質を見抜き、要求を整理する力
- 長期的な視点で技術選択やアーキテクチャを判断する力
- チーム全体のアウトプットを最大化する力

といった、より高度な問題解決能力の総体です。

AIを「使いこなす」とは、AIに的確な指示を与え、その出力を評価し、プロジェクト全体の調和を考えて取捨選択と修正を行うことに他なりません。そのための土台となるのが、設計力なのです。

## まとめ

本章では、AI時代において、なぜ設計が重要なのかを改めて確認しました。

- AIは優秀なコーダーだが、アーキテクトではない。
- 良い設計は、変更に強く、人間にもAIにも理解しやすい。
- 設計力こそが、AI時代のエンジニアの核となるスキルである。

AIの登場は、私たちエンジニアから仕事を奪うものではありません。むしろ、私たちを「本来やるべき、より創造的な仕事」へと導いてくれる、強力なパートナーなのです。

では、具体的にどのような原則を意識すれば、「良い設計」に近づけるのでしょうか。次章では、すべての設計の基本となる、シンプルさと必要十分性に関する2つの原則、KISSとYAGNIを取り上げます。
